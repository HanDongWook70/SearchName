<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" type="text/css" href="./style.css" />
    <title>Search Name</title>
  </head>
  <body>
  <div class="container">
    <article id="article1" class="container-fluid">
      <div class="container-md">
        <h1 class="text-center display-1 fw-bold">SearchName</h1>
        <h2 id= "typeTarget" class="text-center fs-3 type-effect fw-light"></h2>
        <div class="d-grid gap-2 col-4 mx-auto">
          <button onclick = "location.href = '#article2'" type="button" class="btn btn-primary">검색하기</button>
        </div>
        
      </div>
    </article>

    <article id="article2" class="container-fluid">
      <div class="container-fluid">
        <div class="container-fluid">
          <form id="nameInput">
            <p><label for="name"></label></p>
            <p>
              <input
                type="text"
                class="form-control"
                id="name"
                placeholder="영어 이름을 입력해주세요"
              />
            </p>
            <p><button type="submit" class="btn btn-primary">입력</button></p>
          </form>
        </div>
        <div class="visually-hidden container-fluid" id="resultSection2"></div>
        <p></p>
        <div class="visually-hidden container-fluid" id="resultSection1"></div>
        
        
    </article>
  </div>
  </body>
  <!-- typeit -->
  <script src="https://unpkg.com/typeit@8.7.0/dist/index.umd.js"></script>
  <script src="/path/to/typeit/source"></script>
  <!-- bootstrap -->
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
    crossorigin="anonymous"
  ></script>
  <script
    src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"
    integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB"
    crossorigin="anonymous"
  ></script>
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"
    integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13"
    crossorigin="anonymous"
  ></script>
  <!-- Vanta -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r121/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.waves.min.js"></script>
  <script>
    VANTA.WAVES({
      el: "html",
      mouseControls: true,
      touchControls: true,
      gyroControls: false,
      minHeight: 200.0,
      minWidth: 200.0,
      scale: 1.0,
      scaleMobile: 1.0,
      color: 0x2d8441,
      shininess: 52.0,
    });
  </script>
<script>
new TypeIt("#typeTarget", {
  speed: 50,
  startDelay: 900,
})
  .type(`내 외국 이름이 어디에서 </br> 사용되는지 검색해보세요`, { delay: 100 })
  .go();
</script>
  <script type="module">
    import transNameiso from "./transNameiso.js";
    import countryMap from "./countryMap.js";
    document.getElementById("nameInput").onsubmit = function () {
      const userName = this.name.value;
      this.name.value = "";
      fetch(`https://api.nationalize.io?name=${userName}`)
        .then((response) => response.json())
        .then((data) => data.country)
        .then((country) => {
          const userCountry = country;
          console.log(userCountry);
          if (userCountry.length == 0) {
            const resultTemplet3 = `
              <p>${userName}는(은)
              데이터에 인구수가 너무 적어 결과가 없습니다!</p>
          `;
            document.querySelector("#resultSection1").innerHTML =
              resultTemplet3;
            document.querySelector("#resultSection2").innerHTML = "";
          } else {
            const resultTemplet1 = `
              <table class="table">
                  <tread>
                    <tr>
                      <th scope="col">#</th>
                      <th scope="col">나라 이름</th>
                      <th scope="col">국적 가능성(%)</th>
                    </tr>
                  </tread>
                  <tbody>
                    <tr>
                      <th scope="row">1</th>
                      <td>${transNameiso(userCountry[0].country_id)}(${userCountry[0].country_id})</td>
                      <td>${
                        Math.round(
                          (userCountry[0].probability * 100 + Number.EPSILON) *
                            100
                        ) / 100
                      }</td>
                    </tr>
                    <tr>
                      <th scope="row">2</th>
                      <td>${transNameiso(userCountry[1].country_id)}(${userCountry[1].country_id})</td>
                      <td>${
                        Math.round(
                          (userCountry[1].probability * 100 + Number.EPSILON) *
                            100
                        ) / 100
                      }</td>
                    </tr>
                    <tr>
                      <th scope="row">3</th>
                      <td>${transNameiso(userCountry[2].country_id)}(${userCountry[2].country_id})</td>
                      <td>${
                        Math.round(
                          (userCountry[2].probability * 100 + Number.EPSILON) *
                            100
                        ) / 100
                      }</td>
                    </tr>
                  </tbody>
                </table>
              `;
            const resultTemplet2 = `
              <p><b>${userName}</b>는(은)
              <b>${transNameiso(
                userCountry[0].country_id
              )}</b>에서 쓰였습니다!</p>
              그 외에는 <b>${transNameiso(
                userCountry[1].country_id
              )}</b>,<b>${transNameiso(
              userCountry[2].country_id
            )}</b> 이 있습니다!</p>
              `;
            document.querySelector("#resultSection1").innerHTML =
              resultTemplet1;
            document.querySelector("#resultSection2").innerHTML =
              resultTemplet2;
            document.getElementById("resultSection1").classList.remove('visually-hidden');
            document.getElementById("resultSection2").classList.remove('visually-hidden');
          }
        });
      return false;
    };
  </script>
</html>
